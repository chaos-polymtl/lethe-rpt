<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Windows with WSL" href="windows_wsl.html" /><link rel="prev" title="Installation" href="installation.html" />

    <link rel="shortcut icon" href="../_static/lethe_favicon.ico"/><!-- Generated with Sphinx 7.2.6 and Furo 2023.09.10 -->
        <title>Regular Installation on Linux - Lethe documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Lethe  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">Lethe  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="installation.html">Installation</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Installation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Regular Installation on Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="windows_wsl.html">Windows with WSL</a></li>
<li class="toctree-l2"><a class="reference internal" href="apple_arm.html">Installation on Apple ARM</a></li>
<li class="toctree-l2"><a class="reference internal" href="digital_alliance.html">Running Lethe on Digital Research Alliance of Canada Clusters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../applications.html">Applications Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structure.html">Folder Structure of Lethe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../first_simulation.html">Launching Your First Simulation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../parameters/parameters.html">Parameters Guide</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Parameters Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../parameters/rpt/rpt.html">Radioactive Particle Tracking (RPT)</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Radioactive Particle Tracking (RPT)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../parameters/rpt/detector_parameters.html">Detector Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parameters/rpt/fem_reconstruction.html">FEM Reconstruction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parameters/rpt/parameter_tuning.html">Parameter Tuning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parameters/rpt/rpt_parameters.html">RPT Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../examples/examples.html">Examples</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../examples/rpt/rpt.html">Radioactive Particle Tracking (RPT)</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Radioactive Particle Tracking (RPT)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../examples/rpt/photon-count-calculation-in-a-cylindrical-vessel/photon-count-calculation-in-a-cylindrical-vessel.html">Photon Count Calculation in a Cylindrical Vessel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/rpt/tuning-parameters-with-nomad/tuning-parameters-with-nomad.html">Tuning Count Calculation Model Parameters with NOMAD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/rpt/particle-fem-reconstruction/particle-fem-reconstruction.html">Particle FEM Reconstruction</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../referencing.html">Referencing Lethe</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../contributing/contributing.html">Contributing</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Contributing</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing/pull-requests.html">Pull Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/documentation.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/animation-videos.html">Animation Videos</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="regular-installation-on-linux">
<h1>Regular Installation on Linux<a class="headerlink" href="#regular-installation-on-linux" title="Link to this heading">#</a></h1>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/linux.png"><img alt="../_images/linux.png" src="../_images/linux.png" style="height: 100px;" /></a>
</figure>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Distributions on which compatibility was tested are: Ubuntu 22.04 LTS, Ubuntu 24.04 LTS, Centos 7 and Manjaro.</p>
</div>
<p>Lethe requires a modern version of the <a class="reference external" href="https://www.dealii.org/">deal.II library</a> and its dependencies (MPI, numdiff, p4est, trilinos and METIS). At the time of this writing, <code class="docutils literal notranslate"><span class="pre">deal.II</span> <span class="pre">9.7</span></code> and <code class="docutils literal notranslate"><span class="pre">deal.II</span> <span class="pre">9.8pre</span></code> (the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch version) are supported. A <a class="reference external" href="https://github.com/chaos-polymtl/dealii">dealii fork</a> is maintained by the Lethe team. This fork does not include any modification to deal.II library, but it is the latest version with which Lethe was tested.</p>
<p><strong>Lethe installation steps:</strong></p>
<ol class="arabic simple">
<li><p>Installing deal.II</p></li>
<li><p><a class="reference internal" href="#install-lethe"><span class="std std-ref">Installing Lethe-RPT</span></a></p></li>
</ol>
<p><strong>Installing deal.II and its dependencies:</strong></p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#install-deal-ii-apt"><span class="std std-ref">Installing deal.II using apt</span></a> (recommended for users)</p></li>
<li><p><a class="reference internal" href="#install-deal-ii-candi"><span class="std std-ref">Installing deal.II using Candi</span></a> (recommended for developers)</p></li>
<li><p><a class="reference internal" href="#install-deal-ii-manually"><span class="std std-ref">Installing deal.II manually</span></a> (recommended for experienced developers)</p></li>
</ol>
<section id="installing-deal-ii-using-apt">
<span id="install-deal-ii-apt"></span><h2>Installing deal.II using apt<a class="headerlink" href="#installing-deal-ii-using-apt" title="Link to this heading">#</a></h2>
<p>This is done following <a class="reference external" href="https://www.dealii.org/download.html#:~:text=page%20for%20details.-,Linux%20distributions,-Arch%20Linux">this procedure</a>.</p>
<p>In case you are using Ubuntu, you will need to <a class="reference external" href="https://launchpad.net/~ginggs/+archive/ubuntu/deal.ii-9.7.1-backports">update the backports</a>:</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>sudo add-apt-repository ppa:ginggs/deal.ii-9.7.1-backports
sudo apt update
</pre></div>
</div>
<p>To install deal.II, run:</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>sudo apt-get install libdeal.ii-dev
</pre></div>
</div>
<p>To verify if the correct version of deal.II is installed, run:</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>apt show libdeal.ii-dev
</pre></div>
</div>
<p>This should output several information about the installed version. Everything worked as expected if <code class="docutils literal notranslate"><span class="pre">deal.ii-9.6.0</span></code> is the output</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the installed version is other than <code class="docutils literal notranslate"><span class="pre">deal.ii-9.7.1</span></code>, follow <a class="reference external" href="https://github.com/dealii/dealii/wiki/Getting-deal.II">this link</a>.</p>
</div>
</section>
<section id="installing-deal-ii-using-candi">
<span id="install-deal-ii-candi"></span><h2>Installing deal.II using Candi<a class="headerlink" href="#installing-deal-ii-using-candi" title="Link to this heading">#</a></h2>
<p>To install the dependencies (MPI, p4est, trilinos and METIS) all together using candi, the <a class="reference external" href="https://github.com/dealii/candi.git">procedure</a> on the candi repository can be followed.</p>
<p>Clone the candi git repository in a folder of your choice  (e.g. <code class="docutils literal notranslate"><span class="pre">/home/username/software</span></code>). Edit the <code class="docutils literal notranslate"><span class="pre">candi.cfg</span></code> file to alter which dependencies are compiled. This file should notably be used to force the installation of the deal.II master version directly instead of the current stable version by setting <code class="docutils literal notranslate"><span class="pre">DEAL_II_VERSION=master</span></code> on line 97.</p>
<p>The following packages (which are specified after line 57) should be installed:</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>PACKAGES=&quot;load:dealii-prepare&quot;
PACKAGES=&quot;${PACKAGES} once:numdiff&quot;
PACKAGES=&quot;${PACKAGES} once:opencascade&quot;
PACKAGES=&quot;${PACKAGES} once:parmetis&quot;
PACKAGES=&quot;${PACKAGES} once:p4est&quot;
PACKAGES=&quot;${PACKAGES} once:trilinos&quot;
PACKAGES=&quot;${PACKAGES} dealii&quot;
</pre></div>
</div>
</div></blockquote>
<p>Other packages can be disabled by simply commenting out the lines (adding a <code class="docutils literal notranslate"><span class="pre">#</span></code> at the beginning of the lines)</p>
<p>To ensure that the Lethe test suite works, deal.II must be configured with p4est version 2.3.6. Otherwise, application tests that include restart files will fail.</p>
<p>From the candi folder, the installation of candi can be launched using:</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>./candi.sh -j$numproc --prefix=$path
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">$numproc</span></code> is the number of threads you want to use to compile deal.II and <code class="docutils literal notranslate"><span class="pre">$path</span></code> the installation prefix that is desired (e.g. <code class="docutils literal notranslate"><span class="pre">/home/username/software/candi</span></code>).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For a computer with 8Gb of RAM, 1 thread (<code class="docutils literal notranslate"><span class="pre">numproc=1</span></code>) should be used. For 16 Gb, 4 threads is reasonable. For 32 Gb, 16 threads or more can be used.</p>
</div>
<p>After installation, you should have a <code class="docutils literal notranslate"><span class="pre">deal.II-candi</span></code> folder in the installation prefix directory, with the dealii folder of the desired version (see section <a class="reference internal" href="#update-dealii"><span class="std std-ref">Updating deal.II</span></a>), as well as the required dependencies (p4est, trilinos, etc.).</p>
<p>After installation, add the following lines variable to your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> :</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>  source cand/install/prefix/configuration/enable.sh
  export DEAL_II_DIR=cand/install/prefix/deal.II-v.&lt;version&gt;
</pre></div>
</div>
</section>
<section id="installing-deal-ii-manually">
<span id="install-deal-ii-manually"></span><h2>Installing deal.II manually<a class="headerlink" href="#installing-deal-ii-manually" title="Link to this heading">#</a></h2>
<p>Clone deal.II from the <a class="reference external" href="https://github.com/dealii/dealii">deal.ii official repository</a></p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/dealii/dealii
</pre></div>
</div>
<p>Configure deal.II in a build folder at the same level as the source code</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>mkdir build
cd build
</pre></div>
</div>
<p>Depending on how you have installed p4est, Trilinos and METIS, you may need to specify the installation folder of the three libraries.</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>cmake ../dealii -DDEAL_II_WITH_MPI=ON -DDEAL_II_WITH_TRILINOS=ON -DTRILINOS_DIR=path/to/your/trilinos/installation -DDEAL_II_WITH_P4EST=ON -DP4EST_DIR=path/to/your/p4est/installation  -DDEAL_II_WITH_METIS=ON -DMETIS_DIR=path/to/your/metis/installation -DCMAKE_INSTALL_PREFIX=/path/to/desired/installation`
</pre></div>
</div>
<p>Compile deal.II</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>make -j$numprocs install
</pre></div>
</div>
<p>Create an environment variable for the deal.II directory</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>export DEAL_II_DIR=/path/to/dealii/installation
</pre></div>
</div>
<p>It is generally recommended to add the variable to your bashrc so it is always loaded:</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>echo &quot;export DEAL_II_DIR=/path/to/dealii/installation&quot; &gt;&gt; ~/.bashrc
</pre></div>
</div>
</section>
<section id="installing-lethe-rpt">
<span id="install-lethe"></span><h2>Installing Lethe-RPT<a class="headerlink" href="#installing-lethe-rpt" title="Link to this heading">#</a></h2>
<p>Clone Lethe-RPT from the <a class="reference external" href="https://github.com/chaos-polymtl/lethe-rpt">Lethe-RPT official repository</a>.</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/chaos-polymtl/lethe-rpt
</pre></div>
</div>
<p>Create a build folder at the same level as the lethe folder</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>mkdir build
cd build
</pre></div>
</div>
<p>Build Lethe choosing the compilation option (Debug or Release). You can also optionally specify a path to an installation directory of your choice. We recommend that you do so, since this makes using Lethe much more comfortable.</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>cmake ../lethe-rpt -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=/home/username/path/to/installation
</pre></div>
</div>
<p>or</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>cmake ../lethe-rpt -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/home/username/path/to/installation
</pre></div>
</div>
<p>Then you can compile:</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>make -j$numprocs install
</pre></div>
</div>
<p>This will install lethe-rpt to the installation folder you provided in the previous step. You can now add the following lines to your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>:</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>export PATH=$PATH:/home/username/path/to/installation/bin:
</pre></div>
</div>
<p>to add the Lethe executables to your path.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Hyper-threading will result in poor performance when running Lethe. Make sure that it is not turned on for your machine if you have more logical CPU(s) than the number of Core(s). To obtain this information, you can run the following command in a linux terminal:</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>lscpu | grep -E &#39;^Thread|^Core|^Socket|^CPU\(&#39;
</pre></div>
</div>
<p>To limit the number of thread you can set the environment variable <code class="docutils literal notranslate"><span class="pre">OMP_NUM_THREADS</span></code> to 1 in the terminal you are running the application or in your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file to make it the default:</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>export OMP_NUM_THREADS=1
</pre></div>
</div>
</div>
</section>
<section id="testing-your-installation">
<h2>Testing Your Installation<a class="headerlink" href="#testing-your-installation" title="Link to this heading">#</a></h2>
<p>Lethe comes pre-packaged with an extensive test suit for all of its modules. It can be used to test the validity of your installation. Within the build folder, the test suite can be launched with the following command:</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>ctest -j$numprocs
</pre></div>
</div>
<p>where $numprocs can be the number of physical cores on your machine. Do not be afraid if some tests fail on your machine, they are not always as portable as we would like them to be.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The lethe test suites requires that deal.II be configured with p4est 2.3.6 otherwise the tests that include restart files or that use the <code class="docutils literal notranslate"><span class="pre">lethe-fluid-vans</span></code> or <code class="docutils literal notranslate"><span class="pre">lethe-fluid-particles</span></code> executables will fail. Even if the tests fail, the application should work as expected on your machine(including the restart capabilities).</p>
</div>
</section>
<section id="updating-deal-ii">
<span id="update-dealii"></span><h2>Updating deal.II<a class="headerlink" href="#updating-deal-ii" title="Link to this heading">#</a></h2>
<section id="through-apt">
<h3>Through apt<a class="headerlink" href="#through-apt" title="Link to this heading">#</a></h3>
<p>As all other <code class="docutils literal notranslate"><span class="pre">apt</span></code> packages, run:</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span>sudo apt update
sudo apt upgrade -y
</pre></div>
</div>
</section>
<section id="through-the-git-repository">
<h3>Through the Git Repository<a class="headerlink" href="#through-the-git-repository" title="Link to this heading">#</a></h3>
<p>The deal.II version supported by Lethe is updated and tested every week or so, see the repository <a class="reference external" href="https://github.com/chaos-polymtl/dealii">here</a>. If Lethe was installed with this forked version of deal.II, updating your deal.II installation is as simple as pulling the repository and recompiling the deal.II library. If your deal.II was installed manually using the deal.II master repository, the same process can be used.</p>
</section>
<section id="with-candi">
<h3>With Candi<a class="headerlink" href="#with-candi" title="Link to this heading">#</a></h3>
<p>In the candi folder (for instance, <code class="docutils literal notranslate"><span class="pre">/home/username/software/candi</span></code>), modify the <code class="docutils literal notranslate"><span class="pre">candi.cfg</span></code> to get the latest dealii version, by changing the <code class="docutils literal notranslate"><span class="pre">DEAL_II_VERSION</span></code> variable in the case of an official release with its number (e.g. <code class="docutils literal notranslate"><span class="pre">v9.6.0</span></code>), or by changing it to <code class="docutils literal notranslate"><span class="pre">master</span></code> in the case of a development release. The <code class="docutils literal notranslate"><span class="pre">candi.cfg</span></code> file should contain on lines 96-97:</p>
<div class="copy-button highlight-text notranslate"><div class="highlight"><pre><span></span># Install the following deal.II version (choose master, v9.6.0, ...)
DEAL_II_VERSION=master
</pre></div>
</div>
<p>Run the command <code class="docutils literal notranslate"><span class="pre">./candi.sh</span></code> to install the new version of dealii.</p>
<p>In your <code class="docutils literal notranslate"><span class="pre">/home/deal.ii-candi</span></code> folder, you should have a new folder with the dealii updated version (specified in <code class="docutils literal notranslate"><span class="pre">DEAL_II_VERSION</span></code>, or <code class="docutils literal notranslate"><span class="pre">deal.II-master</span></code> in the case of development version)</p>
<p>You might need to delete the build folder of Lethe and redo the installation process from scratch, but this is rarely the case.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="windows_wsl.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Windows with WSL</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="installation.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Installation</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021-2025, Lethe
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Regular Installation on Linux</a><ul>
<li><a class="reference internal" href="#installing-deal-ii-using-apt">Installing deal.II using apt</a></li>
<li><a class="reference internal" href="#installing-deal-ii-using-candi">Installing deal.II using Candi</a></li>
<li><a class="reference internal" href="#installing-deal-ii-manually">Installing deal.II manually</a></li>
<li><a class="reference internal" href="#installing-lethe-rpt">Installing Lethe-RPT</a></li>
<li><a class="reference internal" href="#testing-your-installation">Testing Your Installation</a></li>
<li><a class="reference internal" href="#updating-deal-ii">Updating deal.II</a><ul>
<li><a class="reference internal" href="#through-apt">Through apt</a></li>
<li><a class="reference internal" href="#through-the-git-repository">Through the Git Repository</a></li>
<li><a class="reference internal" href="#with-candi">With Candi</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=7cec7674"></script>
    </body>
</html>